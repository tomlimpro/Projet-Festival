
@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@using FestivalAPI.Models
@using wpfFestival.ControllersAPI


@Html.Partial("_Navbar")

<link href="~/css/style2.css" rel="stylesheet" />
<link href="~/css/res.css" rel="stylesheet" />
<!-- Modal Inscription -->
<div class="modal fade" id="modalinscription" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Inscription</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <form action="" method="post">
                    <div class="form-group">
                        <label for="email">Adresse e-mail:</label>
                        <input type="email" class="form-control" placeholder="Entrez votre email" name="email1" id="email1">
                    </div>
                    <div class="form-group">
                        <label for="pseudo">Pseudo :</label>
                        <input type="name" class="form-control" placeholder="Entrez votre pseudo" name="pseudo1" id="pseudo1">
                    </div>
                    <div class="form-group">
                        <label for="pwd">Mot de passe:</label>
                        <input type="password" class="form-control" placeholder="Entrez votre mot de passe" name="mdp1" id="mdp1">
                    </div>
                    <button type="submit" name="forminscription" class="btn btn-primary">S'inscrire</button>
                </form>
            </div>
            <div class="modal-footer">
                <label for="pwd">Déjà inscrit ? <button type="button" class="btn btn-outline-danger mr-sm-5" data-toggle="modal" data-dismiss="modal" data-target="#modalconnection">Se connecter</button></label>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>

<body>

    @if (HttpContextAccessor.HttpContext.Session.GetString("email") != null && HttpContextAccessor.HttpContext.Session.GetString("categorie").Equals("Organisateur"))
    {
        Organisateur organisateur = API.Instance.GetOrganisateur(HttpContextAccessor.HttpContext.Session.GetString("email")).Result;
        <aside>
            <div id="sidebar" class="nav-collapse ">
                <!-- sidebar menu start-->
                <ul class="sidebar-menu" id="nav-accordion">
                    <p><br /></p>
                    <h5 class="centered">@HttpContextAccessor.HttpContext.Session.GetString("Prenom") @HttpContextAccessor.HttpContext.Session.GetString("Nom")</h5>


                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-music"></i>
                            <span>Festivals</span>
                        </a>
                        <ul class="sub">

                            <li><a asp-area="" asp-controller="MvcFestivals" asp-action="Details" asp-route-id="@organisateur.FestivalID">Mon festival</a></li>
                            <li><a asp-area="" asp-controller="MvcFestivals" asp-action="Index">Liste des festivals</a></li>

                        </ul>
                    </li>

                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-music"></i>
                            <span>Hébergements</span>
                        </a>
                        <ul class="sub">

                            <li><a asp-area="" asp-controller="MvcHebergements" asp-action="Index">Liste des hébergements</a></li>


                        </ul>
                    </li>

                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-ticket"></i>
                            <span>Tarifs</span>
                        </a>
                        <ul class="sub">

                            <li><a asp-area="" asp-controller="MvcTarifs" asp-action="Index">Les tarifs</a></li>

                        </ul>
                    </li>

                    <li>
                        <a onclick="location.href='@Url.Action("Index", "MvcOrganisateurs")'">
                            <i class="fa fa-group"></i>
                            <span>Les organisateurs </span>
                        </a>
                    </li>

                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-star-o"></i>
                            <span>Les artistes</span>
                        </a>
                        <ul class="sub">

                            <li><a asp-area="" asp-controller="MvcArtistes" asp-action="Index">Liste des artistes</a></li>
                            <li><a asp-area="" asp-controller="MvcArtistes" asp-action="Create">Ajouter un artiste</a></li>

                        </ul>
                    </li>
                </ul>
                <!-- sidebar menu end-->
            </div>
        </aside>


        <section id="main-content">
            <section class="wrapper site-min-height">
                <div class="container">
                    <main role="main" class="pb-3">
                        @RenderBody()
                    </main>
                </div>

            </section>
        </section>

    }


    @RenderBody()

    @Html.Partial("_Footer")




</body>
